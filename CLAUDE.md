# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Overview

This is the source code for raphii.co, a personal website hosting documentation for projects like OyasumiVR and VRTI. The site is built with Astro and Starlight (a documentation framework).

## Development Commands

- `npm run dev` or `npm start` - Start development server (available at http://localhost:4321)
- `npm run build` - Type check and build for production (runs `astro check && astro build`)
- `npm run preview` - Preview production build locally

**Prerequisites:** Node.js 20+

## Architecture

### Astro + Starlight Setup

The site uses Starlight, a documentation-focused Astro framework. Configuration is in `astro.config.mjs`:

- **Site URL:** https://raphii.co
- **Multi-project documentation:** Uses `@lorenzo_lewis/starlight-utils` plugin for multi-sidebar navigation
- **Sidebar organization:** Custom sidebar structure with autogenerated sections for each project
- **Theme customization:** Custom theme provider and selector components in `src/components/`

### Content Structure

Documentation content lives in `src/content/docs/` organized by project:

```
src/content/docs/
├── index.mdx                    # Homepage
├── oyasumivr/                   # OyasumiVR documentation
│   ├── Introduction.mdx
│   └── hidden/                  # Hidden pages (not in sidebar)
│       └── troubleshooting/     # Troubleshooting guides
└── vrti/                        # VRTI documentation
    ├── Introduction.mdx
    ├── Pricing.mdx
    ├── Getting Started/         # User guide
    ├── Help/                    # FAQ, support, devices
    └── Developer/               # Developer documentation
        └── WebSocket API/       # API reference
```

**Content Schema:** Defined in `src/content/config.ts` using Starlight's `docsSchema`

**Sidebar Behavior:**
- The `leadingNavLinks` group provides navigation between OyasumiVR and VRTI documentation
- Each project has its own autogenerated sidebar sections
- Multi-sidebar plugin configured with `switcherStyle: "hidden"`

### Styling

- **Tailwind CSS:** Configured with Starlight plugin in `tailwind.config.mjs`
- **Custom styles:** `src/tailwind.scss` (imported via Starlight's `customCss`)
- **Per-page styles:** Some MDX files include co-located `.scss` files (e.g., `Introduction.scss`)
- **Base styles:** Tailwind base styles disabled (`applyBaseStyles: false`) to avoid conflicts with Starlight

### Custom Components

- `CustomThemeProvider.astro` - Theme provider override
- `CustomThemeSelect.astro` - Theme selector override
- `TableCheckIcon.astro` - Reusable icon component

These override Starlight's default theme components via the `components` config.

## Documentation Authoring

When editing documentation:

- **Location:** All docs are in `src/content/docs/{project}/`
- **Format:** MDX files with frontmatter (title, description, etc.)
- **Images:** Store in `src/assets/` (Astro optimizes them automatically)
- **Internal links:** Use `slug` in frontmatter and Starlight's link format
- **Sections:** Organized by subdirectories, autogenerated in sidebar via `autogenerate: { directory: "path" }`

## Node Requirement

Contributions require Node.js 20+ as specified in the README.
